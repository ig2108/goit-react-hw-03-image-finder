{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Loader/Loader.module.css","components/ButtonLoadMore/ButtonLoadMore.module.css","components/App/App.module.css","components/Searchbar/Searchbar.module.css","components/Searchbar/Searchbar.jsx","services/imagesApi.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Modal/Modal.jsx","components/Loader/Loader.jsx","components/ButtonLoadMore/ButtonLoadMore.jsx","components/App/App.jsx","index.js","components/ImageGallery/ImageGallery.module.css","components/Modal/Modal.module.css"],"names":["module","exports","Searchbar","state","queryInput","handleChangeInputSearch","e","value","target","setState","handleSubmit","preventDefault","onSubmit","props","this","className","styles","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","onChange","autoComplete","autoFocus","placeholder","Component","BASE_URL","fetchImages","query","page","fullUrl","axios","get","ImageGalleryItem","image","id","webformatURL","src","alt","ImageGalleryItemImage","ImageGallery","images","onClickImage","map","key","onClick","Modal","backdropRef","createRef","findModalImageUrl","find","largeImageURL","handleKeyPress","code","onCloseModal","handleBackdropClick","current","window","addEventListener","removeEventListener","imageId","ref","Overlay","Loader","color","height","width","timeout","ButtonLoadMore","onLoadMore","App","searchInput","pageCurrent","isLoading","error","imagesApi","then","data","prevState","hits","catch","finally","openModal","closeModal","handleLoadMore","scrollTo","top","document","documentElement","scrollHeight","behavior","prevProps","container","length","ReactDOM","render","querySelector"],"mappings":"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","file":"static/js/main.3f747887.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3ErA_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Loader_Loader__HmU2h\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ButtonLoadMore\":\"ButtonLoadMore_ButtonLoadMore__1T124\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__ORhzP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2yuaD\",\"SearchForm\":\"Searchbar_SearchForm__2Ediv\",\"SearchFormButton\":\"Searchbar_SearchFormButton__pU2H3\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__HMSJE\",\"SearchFormInput\":\"Searchbar_SearchFormInput__3HLCn\"};","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './Searchbar.module.css';\r\n\r\nexport default class Searchbar extends Component {\r\n  state = {\r\n    queryInput: '',\r\n  };\r\n\r\n  handleChangeInputSearch = e => {\r\n    const { value } = e.target;\r\n    this.setState({\r\n      queryInput: value,\r\n    });\r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    const { queryInput } = this.state;\r\n    const { onSubmit } = this.props;\r\n    if (queryInput) {\r\n      onSubmit(queryInput);\r\n      this.setState({\r\n        queryInput: '',\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { queryInput } = this.state;\r\n    return (\r\n      <header className={styles.Searchbar}>\r\n        <form className={styles.SearchForm} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={styles.SearchFormButton}>\r\n            <span className={styles.SearchFormButtonLabel}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={styles.SearchFormInput}\r\n            type=\"text\"\r\n            value={queryInput}\r\n            onChange={this.handleChangeInputSearch}\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\n","// import React from 'react';\r\nimport axios from 'axios';\r\n\r\n// https://pixabay.com/api/?q=что_искать&page=номер_страницы&key=твой_ключ&image_type=photo&orientation=horizontal&per_page=12\r\n\r\nconst KEY = '15876252-73f3be1600bc59555b8bf80ec';\r\nconst BASE_URL = `https://pixabay.com/api/?key=${KEY}&lang=ru&lang=en&image_type=photo&orientation=horizontal&per_page=12&`;\r\n\r\nconst fetchImages = (query = 'dog', page = 1) => {\r\n  const fullUrl = BASE_URL + `q=${query}&page=${page}`;\r\n  // return console.log(fullUrl);\r\n  return axios.get(fullUrl);\r\n};\r\n\r\nexport default fetchImages;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './ImageGalleryItem.module.css';\r\n\r\nconst ImageGalleryItem = ({ image }) => {\r\n  const { id, webformatURL } = image;\r\n\r\n  return (\r\n    <img\r\n      src={webformatURL}\r\n      id={id}\r\n      alt=\"\"\r\n      className={styles.ImageGalleryItemImage}\r\n    />\r\n  );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  image: PropTypes.shape({\r\n    id: PropTypes.number.isRequired,\r\n    webformatURL: PropTypes.string.isRequired,\r\n  }).isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import React from 'react';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './ImageGallery.module.css';\r\n\r\nconst ImageGallery = ({ images, onClickImage }) => {\r\n  return (\r\n    <ul className={styles.ImageGallery}>\r\n      {images.map(image => (\r\n        <li\r\n          key={image.id}\r\n          className={styles.ImageGalleryItem}\r\n          onClick={onClickImage}\r\n        >\r\n          <ImageGalleryItem image={image} />\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nImageGallery.propTypes = {\r\n  images: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.number.isRequired,\r\n    }).isRequired,\r\n  ).isRequired,\r\n  onClickImage: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React, { Component, createRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './Modal.module.css';\r\n\r\nexport default class Modal extends Component {\r\n  state = {};\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyPress);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyPress);\r\n  }\r\n\r\n  backdropRef = createRef();\r\n\r\n  findModalImageUrl = (images, id) => {\r\n    return images.find(image => {\r\n      return image.id === id && image.largeImageURL;\r\n    });\r\n  };\r\n\r\n  handleKeyPress = e => {\r\n    if (e.code !== 'Escape') return;\r\n\r\n    this.props.onCloseModal();\r\n  };\r\n\r\n  handleBackdropClick = e => {\r\n    const { current } = this.backdropRef;\r\n    if (current && e.target !== current) return;\r\n    this.props.onCloseModal();\r\n  };\r\n\r\n  render() {\r\n    const { images, imageId } = this.props;\r\n    const { largeImageURL } = this.findModalImageUrl(images, +imageId);\r\n    return (\r\n      <div\r\n        ref={this.backdropRef}\r\n        onClick={this.handleBackdropClick}\r\n        className={styles.Overlay}\r\n      >\r\n        <div className={styles.Modal}>\r\n          <img src={largeImageURL} alt=\"\" />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nModal.propTypes = {\r\n  imageId: PropTypes.string.isRequired,\r\n  onCloseModal: PropTypes.func.isRequired,\r\n  images: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.number.isRequired,\r\n      largeImageURL: PropTypes.string.isRequired,\r\n    }),\r\n  ).isRequired,\r\n};\r\n","import React from 'react';\r\nimport Loading from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\nimport styles from './Loader.module.css';\r\n\r\nconst Loader = () => (\r\n  <div className={styles.Loader}>\r\n    <Loading\r\n      type=\"Watch\"\r\n      color=\"#3f51b5\"\r\n      height={100}\r\n      width={100}\r\n      timeout={3000} //3 secs\r\n    />\r\n    ;\r\n  </div>\r\n);\r\n\r\nexport default Loader;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './ButtonLoadMore.module.css';\r\n\r\nconst ButtonLoadMore = ({ onLoadMore }) => {\r\n  return (\r\n    <button\r\n      className={styles.ButtonLoadMore}\r\n      type=\"button\"\r\n      onClick={onLoadMore}\r\n    >\r\n      Load more\r\n    </button>\r\n  );\r\n};\r\n\r\nButtonLoadMore.propTypes = {\r\n  onLoadMore: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ButtonLoadMore;\r\n","import React, { Component } from 'react';\r\nimport Searchbar from '../Searchbar/Searchbar';\r\nimport imagesApi from '../../services/imagesApi';\r\nimport ImageGallery from '../ImageGallery/ImageGallery';\r\nimport Modal from '../Modal/Modal';\r\nimport Loader from '../Loader/Loader';\r\nimport ButtonLoadMore from '../ButtonLoadMore/ButtonLoadMore';\r\n\r\nimport styles from './App.module.css';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\n\r\nexport default class App extends Component {\r\n  state = {\r\n    images: [],\r\n    searchInput: '',\r\n    pageCurrent: 1,\r\n    isLoading: false,\r\n    error: null,\r\n    imageId: '',\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (\r\n      prevState.pageCurrent !== this.state.pageCurrent ||\r\n      prevState.searchInput !== this.state.searchInput\r\n    ) {\r\n      this.fetchImages();\r\n    }\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: 'smooth',\r\n    });\r\n  }\r\n\r\n  fetchImages = () => {\r\n    const { searchInput, pageCurrent } = this.state;\r\n    this.setState({\r\n      isLoading: true,\r\n    });\r\n\r\n    imagesApi(searchInput, pageCurrent)\r\n      .then(({ data }) => {\r\n        this.setState(prevState => ({\r\n          images: [...prevState.images, ...data.hits],\r\n        }));\r\n      })\r\n      .catch(error => this.setState(error))\r\n      .finally(() =>\r\n        this.setState({\r\n          isLoading: false,\r\n        }),\r\n      );\r\n  };\r\n\r\n  openModal = e => {\r\n    const { id } = e.target;\r\n    this.setState({ imageId: id });\r\n  };\r\n\r\n  closeModal = () =>\r\n    this.setState({\r\n      imageId: '',\r\n    });\r\n\r\n  handleSubmit = queryInput => {\r\n    this.setState({\r\n      images: [],\r\n      searchInput: queryInput,\r\n      pageCurrent: 1,\r\n    });\r\n  };\r\n\r\n  handleLoadMore = e => {\r\n    this.setState(prevState => ({\r\n      pageCurrent: prevState.pageCurrent + 1,\r\n    }));\r\n\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: 'smooth',\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { images, error, isLoading, imageId } = this.state;\r\n    return (\r\n      <div className={styles.container}>\r\n        <Searchbar onSubmit={this.handleSubmit} />\r\n        {error && <img src=\"../../error.jpg\" alt=\"error\" />}\r\n        {isLoading && <Loader />}\r\n        {images.length > 0 && (\r\n          <ImageGallery images={images} onClickImage={this.openModal} />\r\n        )}\r\n        {imageId && (\r\n          <Modal\r\n            images={images}\r\n            imageId={imageId}\r\n            onCloseModal={this.closeModal}\r\n          />\r\n        )}\r\n        {images.length > 0 && (\r\n          <ButtonLoadMore onLoadMore={this.handleLoadMore} />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App/App';\r\n\r\nReactDOM.render(<App />, document.querySelector('#root'));\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2k7IH\",\"ImageGalleryItem\":\"ImageGallery_ImageGalleryItem__DY-Tw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__17uPW\",\"Modal\":\"Modal_Modal__3gLrK\"};"],"sourceRoot":""}